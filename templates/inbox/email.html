{% extends 'base.html' %}

{% load i18n %}

{% block breadcumbs %}
    <ul class="breadcrumb">
        <li><a href="{% url 'user-home' %}">{% blocktrans %} {{ user }}'s Home {% endblocktrans %}</a></li>
        <li><a href="{% url 'single-inbox' inbox=email.inbox.inbox domain=email.inbox.domain.domain %}">{{ email.inbox }}</a></li>
        <li class="active">{{ email.subject }}</li>
    </ul>
{% endblock %}

{% block content %}

<div class="email">
    <strong>{% trans "From" %}</strong>: {{ email.from }} <br />
    <strong>{% trans "Received" %}</strong>: <span title="{{ email.date|date:"r" }}">{{ email.date|timesince }} {% trans "ago" %}</span>
    <br />

    <strong>{% trans "Message" %}</strong>:<br />
    {% if plain_message %}
        <pre>
    {% endif %}

    {{ email.body|safe }}

    {% if plain_message %}
        </pre>
    {% endif %}

    <br />
    <strong>{% trans "Attachments" %}</strong>:<br />
    {% for attachment in attachments %}
        <div class="input-prepend">
            <span class="add-on">{{ attachment.1.filename }} ({{ attachment.1.content_type.0 }})</span>
            <span class="btn-group" id="prependedInput">
                    <a href="{% url 'email-attachment' attachmentid=attachment.0.id method='download' %}" class="btn btn-attachment">{% trans "Download" %}</a>
                    <a href="{% url 'email-attachment' attachmentid=attachment.0.id method='view' %}" class="btn btn-attachment">{% trans "View" %}</a>
                </span>
        </span>
    </div><br />
{% endfor %}

</div>

{% endblock %}
